var JW=JW||{};JW.App=function(){var n={},t={},e={},i=["focus","blur","abort","error","load","resize","scroll","unload"];return{addGlobal:function(n,t){e[n]=t()},addModule:function(t,e){n[t]={creator:e}},addService:function(n,e){t[n]={creator:e}},broadcast:function(t,e){for(var i in n)n[i].instance&&n[i].instance.onmessage&&$.inArray(e.type,n[i].instance.message)>=0&&n[i].instance.onmessage(e)},destroy:function(){isInitialized=!1},getService:function(n){return t[n]?t[n].instance=t[n].instance||t[n].creator(this):void 0},getGlobal:function(n){return e[n]},init:function(){this.startAll(),isInitialized=!0},isInitialized:function(){return isInitialized},isStarted:function(t){return n[t].instance?!0:!1},listen:function(t,e,o){var r;-1!==$.inArray(e,i)?(r="window"===o?window:o,$(r).live(e,function(i){var r="on"+e;$(this).is(o)&&"function"==typeof n[t].instance[r]&&n[t].instance[r](i,this)})):$(document).delegate(o,e,function(i){var r="on"+e;$(this).is(o)&&"function"==typeof n[t].instance[r]&&n[t].instance[r](i,this)})},removeModule:function(t){this.stop(t),n[t]=null},removeService:function(n){service[n]=null},start:function(t){if(n[t].sandbox=new JW.Context(t,this),n[t].instance=n[t].creator(n[t].sandbox),"function"==typeof n[t].instance.init&&n[t].instance.init(),n[t].instance.events instanceof Array);else for(var e,i,o,r,s=t.split(","),a=0;s.length>a;a++){r=s[a];for(e in n[t].instance.events)i=r+" "+n[t].instance.events[e],i=i.replace(/,/g,", "+t).replace(/this\b/g,""),o=n[t].instance["on"+e],"string"==typeof i&&"function"==typeof o&&this.listen(t,e,i)}},startAll:function(){var t;for(t in n)n.hasOwnProperty(t)&&this.start(t)},stop:function(t){"function"==typeof n[t].destroy&&n[t].destroy(),n[t].instance=null},stopAll:function(){for(var t in n)n.hasOwnProperty(t)&&this.stop(t)}}}(),JW.Context=function(n,t){return{getService:function(n){return t.getService(n)},getGlobal:function(n){return t.getGlobal(n)},broadcast:function(e){t.broadcast(n,e)},getElement:function(){return $(n)}}};